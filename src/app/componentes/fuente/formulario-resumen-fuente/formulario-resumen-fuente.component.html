<div class="container white">
  <mat-tab-group dynamicHeight [selectedIndex]="selected.value" (selectedIndexChange)="selected.setValue($event)">
    <mat-tab label="Formulario">
      <div class="card-body">
        <form [formGroup]="fuenteForm">
          <div class="modal-content mat-elevation-z4">
            <div class="modal-header color-green">
              <h5 class="modal-title">Formulario de resumen fuente</h5>
            </div>
            <div class="row">
              <div class="col-md-2">
                <label for="">DOCUMENTO:</label>
              </div>
              <div class=" col-md-4 mt10">
                <mat-form-field>
                  <mat-select placeholder=" " panelClass="color-panel-green" formControlName="naturalezadocumento">
                    <mat-option>-- Ninguna --</mat-option>
                    <mat-option *ngFor="let naturalezaDocumento of criterio_codfuente" [value]="naturalezaDocumento.value">
                      {{naturalezaDocumento.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="md-form col-md-4 mt10" *ngIf="editar">
                <input mdbInputDirective type="text" id="form1" class="form-control" data-error=" " data-success=" " formControlName="codfuente">
                <label for="form1">&nbsp;&nbsp;&nbsp;&nbsp;CÓDIGO DE LA FUENTE</label>
              </div>
              <div class="md-form col-md-4 mt10" *ngIf="guardar">
                <input mdbInputDirective type="text" id="form1" class="form-control" data-error=" " data-success=" " formControlName="codfuente"
                  disabled>
                <label for="form1">&nbsp;&nbsp;&nbsp;&nbsp;CÓDIGO DE LA FUENTE</label>
              </div>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class="col-md-2">
                <label for="">CITA:</label>
              </div>
              <div class="md-form  col-md-9 mt-20">
                <i class="fa fa-pencil prefix"></i>
                <textarea mdbInputDirective type="text" id="formCita" class="md-textarea form-control" rows="1" data-error=" " data-success=" "
                  formControlName="cita"></textarea>
                <label for="formCita">Cita Bibliográfica</label>
              </div>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class=" col-md-2">
                <label for="">ARCHIVADO:</label>
              </div>
              <div class="md-form col-md-4 mt-20">
                <input mdbInputDirective type="text" id="formArchivado" class="form-control" data-error=" " data-success=" " formControlName="archivado">
                <label for="formArchivado">&nbsp;&nbsp;&nbsp;&nbsp;Indica el lugar donde está el documento.</label>
              </div>
              <div class="form-group mt-15">
                <input type="file" #file style="display: none" (change)="onFilesAdded()" multiple />
                <div>
                  <button mat-raised-button [disabled]="cargado" class="add-files-btn color-green" (click)="agregarArchivos()">
                    Agregar Archivos
                  </button>
                </div>
              </div>
            </div>
            <div class="card-body">
              <mat-tab-group dynamicHeight [selectedIndex]="selectedArchivos.value" (selectedIndexChange)="selectedArchivos.setValue($event)">
                <mat-tab label="Nuevos Archivos">
                  <div class="row">
                    <div class="container" fxLayout="column" fxLayoutAlign="space-evenly stretch">
                      <mat-dialog-content fxFlex>
                        <mat-list>
                          <mat-list-item *ngFor="let archivo of archivos">
                            <h4 mat-line>{{archivo.name}}</h4>
                            <mat-progress-bar *ngIf="progreso" mode="determinate" [value]="progreso[archivo.name].progreso | async"></mat-progress-bar>
                          </mat-list-item>
                        </mat-list>
                      </mat-dialog-content>
                    </div>
                  </div>
                </mat-tab>
                <mat-tab label="Archivos disponibles">
                  <app-archivos-disponibles></app-archivos-disponibles>
                </mat-tab>
              </mat-tab-group>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class="col-md-2">
                <label for="">COBGEO:</label>
              </div>
              <div class="md-form col-md-9 mt-20">
                <input mdbInputDirective type="text" id="formCOBGEO" class="form-control" data-error=" " data-success=" " formControlName="cobgeo">
                <label for="formCOBGEO">&nbsp;&nbsp;&nbsp;&nbsp;Cobertura Geográfica de la Información del Documento.</label>
              </div>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class="col-md-2">
                <label for="">S:</label>
              </div>

              <div class="md-form  col-md-2 mt-20">
                <input mdbInputDirective type="text" id="formRangoG" class="form-control" formControlName="coords" data-error=" " data-success=" ">
                <label for="formRangoG"></label>
              </div>
              <div class="md-form col-md-2 mt-20">
                <input mdbInputDirective type="text" id="formRangoN" class="form-control" formControlName="coordn" data-error=" " data-success=" ">
                <label for="formRangoN">&nbsp;&nbsp;&nbsp;&nbsp;N</label>
              </div>
              <div class="md-form col-md-2 mt-20">
                <input mdbInputDirective type="text" id="formRangos" class="form-control" formControlName="coorde" data-error=" " data-success=" ">
                <label for="formRangos">&nbsp;&nbsp;&nbsp;&nbsp;E</label>
              </div>
              <div class="md-form col-md-2 mt-20">
                <input mdbInputDirective type="text" id="formRangos" class="form-control" formControlName="coordo" data-error=" " data-success=" ">
                <label for="formRangos">&nbsp;&nbsp;&nbsp;&nbsp;O</label>
              </div>

            </div>
            <!--fin row  -->

            <div class="row">
              <div class="col-md-2">
                <label for="">RESUMEN:</label>
              </div>
              <div class="md-form  col-md-9 mt-20">
                <i class="fa fa-pencil prefix"></i>
                <textarea mdbInputDirective type="text" id="formResumen" class="md-textarea form-control" rows="1" data-error=" " data-success=" "
                  formControlName="resumen"></textarea>
                <label for="formResumen">Escriba un texto corto pero representativo del contenido general del documento.</label>
              </div>
            </div>
            <!-- fin row -->
            <!-- Inicio row -->
            <div class="row">
              <div class="col-md-2">
                <label for="">TEMA:</label>
              </div>
              <!-- Inicio col-md-2  Tema 1-->
              <div class="col-md-2 ">
                <label>
                  <mat-checkbox formControlName="comunnat">COMMUNNAT</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="comunterr">COMUNTERR</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="bosque">BOSQUE</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="sabana">SABANA</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="prado">PRADO</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="chaparral">CHAPARRAL</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="desierto">DESIERTO</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="alpino">ALPINO</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="otroterr">OTROTERR</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="comunac">COMUNAC</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="palustre">PALUSTRE</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="lacustre">LACUSTRE</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="fluvial">FLUVIAL</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="estuarino">ESTUARINO</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="maritimo">MARITIMO</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="subterr">SUBTERR</mat-checkbox>
                </label>
              </div>
              <!-- Fin col-md-2 -->
              <!-- Inicio col-md-2 Tema 2-->
              <div class="col-md-2 ">
                <label>
                  <mat-checkbox formControlName="flora">FLORA</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="floraac">FLORAAC</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="floraterr">FLORATERR</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="plnovasc">PLNOVASC</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="plvasc">PLVASC</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="microorg">MICROORG</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="infositio">INFOSITIO</mat-checkbox>
                </label>
              </div>
              <!-- Fin col-md-2 -->
              <!-- Inicio col-md-2 Tema 3-->
              <div class="col-md-2 ">
                <label>
                  <mat-checkbox formControlName="fauna">FAUNA</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="faunaac">FAUNAAC</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="faunaterr">FAUNATERR</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="moluscos">MOLUSCOS</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="insectos">INSECTOS</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="crustaceos">CRUSTACEOS</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="otroartrop">OTROARTROP</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="otroinvert">OTROINVERT</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="peces">PECES</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="anfibios">ANFIBIOS</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="reptiles">REPTILES</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="aves">AVES</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="mamiferos">MAMIFEROS</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="cienfisic">CIENFISIC</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="fisiotopo">FISIOTOPO</mat-checkbox>
                </label>
              </div>
              <!-- Fin col-md-2 -->
              <!-- Inicio col-md-2 Tema 4-->
              <div class="col-md-2 ">
                <label>
                  <mat-checkbox formControlName="hidrol">HIDROL</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="geologia">GEOLOGIA</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="suelos">SUELOS</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="clima">CLIMA</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="biologia">BIOLOGIA</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="ecologia">ECOLOGIA</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="funecol">FUNECOL</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="diversnat">DIVERSNAT</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="inventario">INVENTARIO</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="tecinvest">TECINVEST</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="am">AM</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="planmanejo">PLANMANEJO</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="tecmanejo">TECMANEJO</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="estimpamb">ESTIMPAMP</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="organprott">ORGANPROTT</mat-checkbox>
                </label>
                <label>
                  <mat-checkbox formControlName="herrprot">HERRPROT</mat-checkbox>
                </label>
              </div>
              <!-- Fin col-md-2 -->
            </div>
            <!-- Fin row -->
            <!-- Inicio row -->
            <div class="row">
              <div class="col-md-2">
                <label for="">PUBLICACION.CDC:</label>
              </div>
              <div class=" col-md-2">
                <mat-form-field>
                  <mat-select placeholder="" panelClass="color-panel-green" formControlName="publicacioncdc">
                    <mat-option>-- Ninguna --</mat-option>
                    <mat-option *ngFor="let sPublicacion of criterio_publicacion_cdc" [value]="sPublicacion.value">
                      {{sPublicacion.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-1">
                <label for="">VALOR:</label>
              </div>
              <div class=" col-md-4">
                <mat-form-field>
                  <mat-select placeholder="VALOR" panelClass="color-panel-green" formControlName="valor">
                    <mat-option>-- Ninguna --</mat-option>
                    <mat-option *ngFor="let sValor of criterio_valor" [value]="sValor.value">
                      {{sValor.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class="col-md-2">
                <label for="">CLAVE:</label>
              </div>
              <div class="md-form  col-md-9 mt10">
                <i class="fa fa-pencil prefix"></i>
                <textarea mdbInputDirective type="text" id="formClave" class="md-textarea form-control" formControlName="clave" rows="1"
                  data-error=" " data-success=" "></textarea>
                <label for="formClave">Complemento del campo TEMA.</label>
              </div>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class="col-md-2">
                <label for="">COMENTARIO:</label>
              </div>
              <div class="md-form  col-md-9 mt-20">
                <i class="fa fa-pencil prefix"></i>
                <textarea mdbInputDirective type="text" id="formComentario" class="md-textarea form-control" formControlName="comentario"
                  rows="1" data-error=" " data-success=" "></textarea>
                <label for="formComentario"> Describe de acuerdo al Valor, el tipo de información contenida.</label>
              </div>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class="col-md-2">
                <label for="">NOTADIGEST:</label>
              </div>
              <div class="md-form  col-md-9 mt-20">
                <i class="fa fa-pencil prefix"></i>
                <textarea mdbInputDirective type="text" id="formNotadigest" class="md-textarea form-control" formControlName="notadigest"
                  rows="1" data-error=" " data-success=" "></textarea>
                <label for="formNotadigest">Anotar en este campo hasta qué punto se ha extraído la fuente toda la información .</label>
              </div>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class="col-md-8">
              </div>
              <div class="md-form col-md-2 input-group-append mt-20">
                <input mdbInputDirective type="text" id="formActualizar" class="form-control" formControlName="actualizar" data-error=" "
                  data-success=" " ngbDatepicker #dActualizar="ngbDatepicker">
                <label for="formActualizar">&nbsp;&nbsp;&nbsp;&nbsp;ACTUALIZAR</label>
                <div (click)="dActualizar.toggle()">
                  <i class="fa fa-calendar prefix"></i>
                </div>
              </div>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class="col-md-8">
              </div>
              <div class="md-form col-md-2 input-group-append mt-20">
                <input mdbInputDirective type="text" id="formControl" class="form-control" formControlName="control" data-error=" " data-success=" "
                  ngbDatepicker #dControl="ngbDatepicker">
                <label for="formControl">&nbsp;&nbsp;&nbsp;&nbsp;CONTROL</label>
                <div (click)="dControl.toggle()">
                  <i class="fa fa-calendar prefix"></i>
                </div>
              </div>
            </div>
            <!-- fin row -->
            <div class="row">
              <div class="col-md-8"></div>
              <div class="md-form col-md-2  mt-20">
                <input mdbInputDirective type="text" id="formbcd" class="form-control" formControlName="bcd" data-error=" " data-success=" ">
                <label for="formbcd">&nbsp;&nbsp;&nbsp;BCD</label>
              </div>
            </div>
          </div>
          <!-- fin modal-content -->
          <div class="text-center">
            <div *ngIf="loading">
              <img src="assets/imagenes/load.gif">
            </div>
            <ngb-alert *ngIf="successMessage" [type]="tipoAlert" (close)="successMessage = null">{{ successMessage }}</ngb-alert>
            <button class="btn color-green waves-light" (click)="nuevo()" mdbWavesEffect>Nuevo</button>
            <button class="btn  color-green waves-light" [disabled]="guardar" mdbWavesEffect (click)="openDialogo()">Guardar</button>
            <button class="btn color-green waves-light" [disabled]="editar" (click)="openDialogoEditar()" mdbWavesEffect>Editar</button>
          </div>
        </form>
      </div>
    </mat-tab>
    <mat-tab label="Buscar">
      <div class="card-body">
        <div class="modal-content mat-elevation-z4">
          <div class="modal-header color-green"></div>
          <!-- Inicio form -->
          <form [formGroup]="buscarForm">
            <!-- Inicio row -->
            <div class="row">
              <div class="md-form col-md-5 mt10">
                <input mdbInputDirective type="text" id="formCodigoFuente" class="form-control" formControlName="codigoFuente" data-error=" "
                  data-success=" ">
                <label for="formCodigoFuente">&nbsp;&nbsp;&nbsp;&nbsp;CÓDIGO DE LA FUENTE</label>
              </div>
              <div class="md-form col-md-5 mt10">
                <input mdbInputDirective type="text" id="formNaturalezaDocumento" class="form-control" formControlName="naturalezaDocumento"
                  data-error=" " data-success=" ">
                <label for="formNaturalezaDocumento">&nbsp;&nbsp;&nbsp;&nbsp;TIPO DE DOCUMENTO</label>
              </div>
            </div>
            <!-- Fin row -->
            <!-- Inicio row -->
            <div class="row">
              <div class="md-form col-md-5 mt-10">
                <input mdbInputDirective type="text" id="formCita" class="form-control" formControlName="cita" data-error=" " data-success=" ">
                <label for="formCita">&nbsp;&nbsp;&nbsp;&nbsp;CITA</label>
              </div>
              <div class="md-form col-md-5 mt-10">
                <input mdbInputDirective type="text" id="formAchivado" class="form-control" formControlName="archivado" data-error=" " data-success=" ">
                <label for="formAchivado">&nbsp;&nbsp;&nbsp;&nbsp;ARCHIVADO</label>
              </div>
            </div>
            <!-- Fin row -->
            <!-- Inicio row -->
            <div class="row">
              <div class="md-form col-md-5 mt-10">
                <input mdbInputDirective type="text" id="formClave" class="form-control" formControlName="clave" data-error=" " data-success=" ">
                <label for="formClave">&nbsp;&nbsp;&nbsp;&nbsp;CLAVE</label>
              </div>
            </div>
            <!-- Fin row -->
            <div>
              <button class="btn color-green waves-light" mdbWavesEffect (click)="buscarFuente()">Buscar</button>
            </div>
          </form>
          <!-- Fin form -->
          <div class="text-center">
            <div *ngIf="loading">
              <img src="assets/imagenes/load.gif">
            </div>
          </div>
          <ngb-alert *ngIf="successMessage" [type]="tipoAlert" (close)="successMessage = null">{{ successMessage }}</ngb-alert>
        </div>
        <!-- Tabla busqueda-->
        <mat-form-field>
          <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtrar">
        </mat-form-field>
        <div class="mat-elevation-z8" *ngIf="dataSource">
          <table mat-table [dataSource]="dataSource" matSort>
            <!-- No. Column -->
            <div class="col-md-1">
              <ng-container matColumnDef="numero">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>No.</th>
                <td mat-cell *matCellDef="let row"> {{row.numero}} </td>
              </ng-container>
            </div>
            <ng-container matColumnDef="naturalezaDocumento">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Documento</th>
              <td mat-cell *matCellDef="let row"> {{row.naturalezaDocumento}} </td>
            </ng-container>
            <ng-container matColumnDef="codigoFuente">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>CodigoFuente</th>
              <td mat-cell *matCellDef="let row"> {{row.codigoFuente}} </td>
            </ng-container>
            <ng-container matColumnDef="cita">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Cita</th>
              <td mat-cell *matCellDef="let row"> {{row.cita}} </td>
            </ng-container>
            <ng-container matColumnDef="clave">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Clave</th>
              <td mat-cell *matCellDef="let row"> {{row.clave}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns" class="color-green"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="base-element-row" (click)="mostrar_Fuente_Busqueda(row);">
            </tr>
          </table>
          <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        </div>
        <!-- Fin tabla busqueda -->
      </div>
      <!-- fin card-body -->
    </mat-tab>
  </mat-tab-group>
</div>